"0","bed = bed_load %>% transmute(date = lubridate::date(date), bsd, D50_A, bsd_B, D50_B)"
"0","bed_susp_2007_2023 = suspended_load %>% left_join(bed) %>% mutate(year1 = year(date), q = q, month1  = month(date)) %>% "
"0","  #subset(year1 > 2014 & year1 < 2024)"
"0","  subset(year1 == 2023 | year1 == 2016 | year1 == 2017 | year1 == 2015 |  year1 == 2019) %>% "
"0","  subset(month1 > 5 & month1 < 10)"
"2","Joining with `by = join_by(date)`"
"0","djan_sed_all = bed_susp_2007_2023 %>% subset(year1 == 2016 | year1 == 2017 | year1 == 2023) %>% transmute(date, bsd, ssd, q, tsd = bsd + ssd) %>% na.omit()"
"0",""
"0","bed_susp_2007_2023 = bed_susp_2007_2023 %>% mutate(dolya =  ifelse(q < 1.1, 1, 0.7939*q^(-3.07) ),"
"0","                                                   tsd = (ssd + ssd*dolya/(1 - dolya))*60*60*24/1000000, "
"0","                                                   sediment_budget = ifelse(q > 1, 0.1318*q*q - 0.3266*q + 0.2144, 0)"
"0","                                                   ) "
"0",""
"0","rm(bed)"
