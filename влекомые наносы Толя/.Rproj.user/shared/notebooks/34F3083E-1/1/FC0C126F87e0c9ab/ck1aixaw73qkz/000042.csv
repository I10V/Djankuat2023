"0","bed = bed_load %>% transmute(date = lubridate::date(date), bsd, D50_A, bsd_B, D50_B)"
"0","bed_susp_2007_2023 = suspended_load %>% left_join(bed) %>% mutate(year1 = year(date), q = q, month1  = month(date)) %>% "
"0","  #subset(year1 > 2014 & year1 < 2024)"
"0","  subset(year1 == 2023 | year1 == 2016 | year1 == 2017 | year1 == 2015 |  year1 == 2019) %>% "
"0","  subset(month1 > 5 & month1 < 10)"
"2","Joining with `by = join_by(date)`"
"0","g2 = ggplot(data = bed_susp_2007_2023) + "
"0","  geom_line(aes(x = date, y = q, colour = 'Расход воды, м3/с')) + "
"0","  geom_line(aes(x = date, y = ssd, colour = 'Расход взвешанных наносов, кг/с')) + "
"0","  geom_point(aes(x = date, y = bsd, colour = 'Расход влекомых наносов, кг/с'))+ "
"0","  geom_col(aes(x = date, y = rain_mm/10, colour = 'Осадки, см'), width = 0, fill = NA)+"
"0","  facet_wrap(~year1, scales = ""free_x"") + "
"0","  labs(y = 'м3/с ,  кг/с , см', "
"0","       x = ' ', "
"0","       colour = ' ') + scale_x_datetime(date_breaks = '10 days', date_labels = ""%m / %d"")+"
"0","  theme(axis.text.x = element_text(size = 20, angle = 90), axis.title.y = element_text(size = 20), legend.text = element_text(size = 20) ) + "
"0","  guides(colour = guide_legend(nrow = 2))"
"0",""
"0","ggsave(plot = g2 , filename = 'g2.png', width = 12, height = 9)"
"0",""
"0",""
"0","djan_sed_all = bed_susp_2007_2023 %>% subset(year1 == 2016 | year1 == 2017 | year1 == 2023) %>% transmute(date, bsd, ssd, q, tsd = bsd + ssd) %>% na.omit()"
"0",""
"0","# summary( djan_sed_all$bsd/(djan_sed_all$ssd+djan_sed_all$bsd) * 100 )"
"0","# "
"0","# corrplot::corrplot(djan_sed_all %>% select(-date) %>% cor() , method = 'number' )"
"0","# "
"0","# t= lm(tsd ~ q, data = djan_sed_all) "
"0","# t"
"0","# "
"0","# plot(y = djan_sed_all$tsd, x = djan_sed_all$q)"
"0",""
"0","bed_susp_2007_2023 = bed_susp_2007_2023 %>% mutate(tsd = 0.017*exp(1.867*q))"
"0",""
