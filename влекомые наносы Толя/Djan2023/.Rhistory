.libPaths(c('C:/Rlib', .libPaths())) #way of libraries folder
library(tidyverse)
knitr::opts_chunk$set(echo = TRUE)
meteo = read.csv('Jankuat_meteo_2023.txt')
View(meteo)
meteo = read.csv2('Jankuat_meteo_2023.txt')
meteo = readr::read_csv('Jankuat_meteo_2023.txt')
meteo = read.csv('Jankuat_meteo_2023.txt', header = T)
meteo = read.csv('Jankuat_meteo_2023.txt', header = T)
View(meteo)
meteo = read.csv('Jankuat_meteo_2023.txt', header = T, sep = '  ')
meteo = read.csv('Jankuat_meteo_2023.txt', header = T, sep = ' ')
View(meteo)
?read.c
?read.csv
meteo = ?read.csv('Jankuat_meteo_2023.txt', header = T, sep = ' ', skip = 1)
meteo = ?read.csv('Jankuat_meteo_2023.txt', header = T, sep = ' ', skip = 2)
meteo = read.csv('Jankuat_meteo_2023.txt', header = T, sep = ' ', skip = 1)
View(meteo)
meteo = read.csv('Jankuat_meteo_2023.txt', header = T, sep = '.', skip = 1)
meteo = read.csv('Jankuat_meteo_2023.txt', header = T, sep = ' ', skip = 1)
View(meteo)
meteo = read.csv('Jankuat_meteo_2023.txt', header = T, sep = ' ', skip = 2)
View(meteo)
meteo = read.csv('Jankuat_meteo_2023.txt', header = T, sep = '  ', skip = 2)
meteo = read.csv('Jankuat_meteo_2023.txt', header = T, sep = '  ', skip = 2)
meteo = read.csv('Jankuat_meteo_2023.txt', header = T, sep = '  ', skip = 2)
meteo = read.csv('Jankuat_meteo_2023.txt', header = T, sep = '/n', skip = 2)
meteo = read.csv('Jankuat_meteo_2023.txt', header = T, sep = '', skip = 2)
View(meteo)
meteo = read.csv('Jankuat_meteo_2023.txt', header = T, sep = '', skip = 1)
View(meteo)
meteo = read.csv('Jankuat_meteo_2023.txt', header = T, sep = '')
meteo = read.csv('Jankuat_meteo_2023.txt', header = T, sep = '', skip = 1)
View(meteo)
library(lubridate)
meteo$d = lubridate::as_date(meteo$Date)
View(meteo)
meteo$d = lubridate::as_date(c(meteo$Date, meteo$Time))
meteo = read.csv('Jankuat_meteo_2023.txt', header = T, sep = '', skip = 1)
meteo$d = lubridate::as_date(paste0(meteo$Date, meteo$Time))
View(meteo)
meteo = read.csv('Jankuat_meteo_2023.txt', header = T, sep = '', skip = 1)
meteo$d = lubridate::as_date(paste0(meteo$Date, ' ', meteo$Time))
meteo = read.csv('Jankuat_meteo_2023.txt', header = T, sep = '', skip = 1)
meteo$d = lubridate::as_date(paste0(meteo$Date, '', meteo$Time))
meteo = read.csv('Jankuat_meteo_2023.txt', header = T, sep = '', skip = 1)
meteo$d = paste0(meteo$Date, '', meteo$Time)
View(meteo)
meteo = read.csv('Jankuat_meteo_2023.txt', header = T, sep = '', skip = 1)
meteo$d = paste0(meteo$Date, ' ', meteo$Time)
meteo$d
meteo = read.csv('Jankuat_meteo_2023.txt', header = T, sep = '', skip = 1)
meteo$d = lubridate::as_datetime(paste0(meteo$Date, ' ', meteo$Time))
meteo$d
?as_datetime
meteo$d = ymd_hms(paste0(meteo$Date, ' ', meteo$Time))
meteo$d
meteo$d = ymd_hm(paste0(meteo$Date, ' ', meteo$Time))
meteo$d
View(meteo)
View(meteo)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  ymd_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain)
View(meteo)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  ymd_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023)
View(meteo)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  ymd_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023)[-1, ]
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  ymd_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023) %>% data.frame(-1, )
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  ymd_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023) %>% data.frame()[-1, ]
View(meteo)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  ymd_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 & hour(d) > 0)
View(meteo)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  ymd_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 | hour(d) > 0)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  ymd_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 && hour(d) > 0)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  ymd_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 & hour(d) != '')
View(meteo)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  ymd_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 & hour(d) != ' ')
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  ymd_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023)
kinzhka = readxl::read_xlsx('H:/джан 2023/книжка август .xlsx', sheet = 1)
View(kinzhka)
View(meteo)
View(kinzhka)
kinzhka = readxl::read_xlsx('H:/джан 2023/книжка август .xlsx', sheet = 1) %>% mutate(d = ymd(`Дата`))
View(kinzhka)
kinzhka = readxl::read_xlsx('H:/джан 2023/книжка август .xlsx', sheet = 1) %>% mutate(d = paste0(ymd(`Дата`), ' ', time(ymd_hms(`Время`))  ))
View(kinzhka)
kinzhka = readxl::read_xlsx('H:/джан 2023/книжка август .xlsx', sheet = 1) %>% mutate(d = paste0(ymd(`Дата`), ' ', hms(ymd_hms(`Время`))  ))
View(kinzhka)
kinzhka = readxl::read_xlsx('H:/джан 2023/книжка август .xlsx', sheet = 1) %>% mutate(d = paste0(ymd(`Дата`), ' ', ymd_hms(`Время`))  ))
kinzhka = readxl::read_xlsx('H:/джан 2023/книжка август .xlsx', sheet = 1) %>% mutate(d = paste0(ymd(`Дата`), ' ', ymd_hms(`Время`))  )
View(kinzhka)
kinzhka = readxl::read_xlsx('H:/джан 2023/книжка август .xlsx', sheet = 1) %>% mutate(d = paste0(ymd(`Дата`), ' ', strptime(ymd_hms(`Время`))  ))
kinzhka = readxl::read_xlsx('H:/джан 2023/книжка август .xlsx', sheet = 1) %>% mutate(d = paste0(ymd(`Дата`), ' ', strptime(ymd_hms(`Время`)), format = "%H:%M:%S") )
kinzhka = readxl::read_xlsx('H:/джан 2023/книжка август .xlsx', sheet = 1) %>% mutate(d = paste0(ymd(`Дата`), ' ', strptime(ymd_hms(`Время`), format = "%H:%M:%S")) )
View(kinzhka)
ymd_hms(`Время`)
View(kinzhka)
kinzhka = readxl::read_xlsx('H:/джан 2023/книжка август .xlsx', sheet = 1) %>% mutate(d = paste0(ymd(`Дата`), ' ', strptime(ymd_hms(`Время`), format = "%H:%M:%S")) )
View(kinzhka)
kinzhka = readxl::read_xlsx('H:/джан 2023/книжка август .xlsx', sheet = 1) %>% mutate(d = paste0(ymd(`Дата`), ' ', strptime(`Время`, format = "%H:%M:%S")))
View(kinzhka)
strptime(kinzhka$`Время`, format = "%H:%M:%S"))
strptime(kinzhka$`Время`, format = "%H:%M:%S")
kinzhka = readxl::read_xlsx('H:/джан 2023/книжка август .xlsx', sheet = 1) %>% mutate(d = paste0(ymd(`Дата`), ' ', paste(hour(ymd_hms(`Время`)),minute(ymd_hms(`Время`)),second(ymd_hms(`Время`))) sep=":")
kinzhka = readxl::read_xlsx('H:/джан 2023/книжка август .xlsx', sheet = 1) %>% mutate(d = paste0(ymd(`Дата`), ' ', paste(hour(ymd_hms(`Время`)),minute(ymd_hms(`Время`)),second(ymd_hms(`Время`)), sep=":")))
View(kinzhka)
kinzhka = readxl::read_xlsx('H:/джан 2023/книжка август .xlsx', sheet = 1) %>% mutate(d = ymd_hms(paste0(ymd(`Дата`), ' ', paste(hour(ymd_hms(`Время`)),minute(ymd_hms(`Время`)),second(ymd_hms(`Время`)), sep=":"))))
View(kinzhka)
View(kinzhka)
kinzhka = readxl::read_xlsx('H:/джан 2023/книжка август .xlsx', sheet = 2) %>% mutate(d = ymd_hms(paste0(ymd(`Дата`), ' ', paste(hour(ymd_hms(`Время`)),minute(ymd_hms(`Время`)),second(ymd_hms(`Время`)), sep=":"))))
View(kinzhka)
kinzhka = readxl::read_xlsx('H:/джан 2023/книжка август .xlsx', sheet = 2) %>% mutate(d = ymd_hms(paste0(ymd(`Дата`), ' ', paste(hour(ymd_hms(`Время`)),minute(ymd_hms(`Время`)),second(ymd_hms(`Время`)), sep=":")))) %>% select(d, )
kinzhka = readxl::read_xlsx('H:/джан 2023/книжка август .xlsx', sheet = 2) %>% mutate(d = ymd_hms(paste0(ymd(`Дата`), ' ', paste(hour(ymd_hms(`Время`)),minute(ymd_hms(`Время`)),second(ymd_hms(`Время`)), sep=":")))) %>% select(d, SSC, temp_water)
kinzhka = readxl::read_xlsx('H:/джан 2023/книжка август .xlsx', sheet = 2) %>% mutate(d = ymd_hms(paste0(ymd(`Дата`), ' ', paste(hour(ymd_hms(`Время`)),minute(ymd_hms(`Время`)),second(ymd_hms(`Время`)), sep=":")))) %>% select(d, SSC, temp_water)
kinzhka = readxl::read_xlsx('H:/джан 2023/книжка август .xlsx', sheet = 2) %>% mutate(d = ymd_hms(paste0(ymd(`Дата`), ' ', paste(hour(ymd_hms(`Время`)),minute(ymd_hms(`Время`)),second(ymd_hms(`Время`)), sep=":")))) %>% select(d, SSC, temp_water)
kinzhka = readxl::read_xlsx('H:/джан 2023/книжка август .xlsx', sheet = 2)
kinzhka = readxl::read_xlsx('H:/джан 2023/книжка август .xlsx', sheet = 2) %>% mutate(d = ymd_hms(paste0(ymd(`Дата`), ' ', paste(hour(ymd_hms(`Время`)),minute(ymd_hms(`Время`)),second(ymd_hms(`Время`)), sep=":")))) %>% select(d, SSC, temp_water)
kinzhka = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 2) %>% mutate(d = ymd_hms(paste0(ymd(`Дата`), ' ', paste(hour(ymd_hms(`Время`)),minute(ymd_hms(`Время`)),second(ymd_hms(`Время`)), sep=":")))) %>% select(d, SSC, temp_water)
View(kinzhka)
View(kinzhka)
View(meteo)
View(kinzhka)
kinzhka = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 2) %>% mutate(d = ymd_hms(paste0(ymd(`Дата`), ' ', paste(hour(ymd_hms(`Время`)),minute(ymd_hms(`Время`)),second(ymd_hms(`Время`)), sep=":")))) %>% select(d, SSC, temp_water) %>% right_join(meteo)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  ymd_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023)
kinzhka = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 2) %>% mutate(d = ymd_hms(paste0(ymd(`Дата`), ' ', paste(hour(ymd_hms(`Время`)),minute(ymd_hms(`Время`)),second(ymd_hms(`Время`)), sep=":")))) %>% select(d, SSC, temp_water) %>% right_join(meteo)
kinzhka = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 2) %>% mutate(d = ymd_hms(paste0(ymd(`Дата`), ' ', paste(hour(ymd_hms(`Время`)),minute(ymd_hms(`Время`)),second(ymd_hms(`Время`)), sep=":")))) %>% select(d, SSC, temp_water) %>% inner_join(meteo)
kinzhka = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 2) %>% mutate(d = ymd_hms(paste0(ymd(`Дата`), ' ', paste(hour(ymd_hms(`Время`)),minute(ymd_hms(`Время`)),second(ymd_hms(`Время`)), sep=":")))) %>% select(d, SSC, temp_water) %>% full_join(meteo)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  ymd_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023)
meteo = meteo[-1, ]
View(meteo)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  ymd_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 & month(d) = 8)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  ymd_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 & month(d) == 8)
View(meteo)
View(meteo)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  ymd_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 & month(d) == 8)
View(meteo)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1)
View(meteo)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  dmy_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 & month(d) == 8)
View(meteo)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1)
View(meteo)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  dmy_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 & month(d) == 8)
meteo$d = ifelse(hour(meteo$d) is.na == T, meteo$d, "")
meteo$d = ifelse( is.na(hour(meteo$d)) == T, meteo$d, "")
View(meteo)
meteo = ifelse(is.na(hour(meteo$d)) == T, meteo$d, "")
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  dmy_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 & month(d) == 8)
meteo = ifelse(is.na(hour(meteo$d)) == T, meteo$d, "")
meteo = ifelse(is.na(hour(meteo$d)) == T, meteo, "")
meteo = subset(is.na(hour(meteo$d)) == T)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  dmy_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 & month(d) == 8)
meteo = subset(is.na(hour(meteo$d)) == T)
meteo = subset(meteo, is.na(hour(d)) == T)
View(meteo)
meteo = subset(meteo, is.na(hour(d)) = T)
meteo = subset(meteo, is.na(hour(d)) == T)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  dmy_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 & month(d) == 8)
meteo = subset(meteo, is.na(hour(d)) == T)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  dmy_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 & month(d) == 8)
meteo = subset(meteo, is.null(hour(d)) == T)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  dmy_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 & month(d) == 8)
meteo[1, ]
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  dmy_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 & month(d) == 8)
View(meteo)
meteo[96, ]
meteo[96, d]
meteo[96, 1]
hour(meteo[96, 1])
hour(meteo[1, 1])
our(meteo[96, 1])
hour(meteo[96, 1])
hour(meteo[96, 1])
hour(meteo[96, 1])
hour(meteo[96, 1])
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  dmy_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 & month(d) == 8)
# hour(meteo[1, 1])
# hour(meteo[96, 1])
#meteo = subset(meteo, is.null(hour(d)) == T)
kinzhka = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 2) %>% mutate(d = ymd_hms(paste0(ymd(`Дата`), ' ', paste(hour(ymd_hms(`Время`)),minute(ymd_hms(`Время`)),second(ymd_hms(`Время`)), sep=":")))) %>% select(d, SSC, temp_water) %>% full_join(meteo)
kinzhka = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 2) %>% mutate(d = ymd_hms(paste0(ymd(`Дата`), ' ', paste(hour(ymd_hms(`Время`)),minute(ymd_hms(`Время`)),second(ymd_hms(`Время`)), sep=":")))) %>% select(d, SSC, temp_water) %>% left_join(meteo)
View(kinzhka)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  dmy_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 & month(d) == 8)
data = meteo %>% left_join(kinzhka)
View(meteo)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  dmy_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 & month(d) == 8)
# hour(meteo[1, 1])
# hour(meteo[96, 1])
#meteo = subset(meteo, is.null(hour(d)) == T)
kinzhka = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 2) %>% mutate(d = ymd_hms(paste0(ymd(`Дата`), ' ', paste(hour(ymd_hms(`Время`)),minute(ymd_hms(`Время`)),second(ymd_hms(`Время`)), sep=":")))) %>% select(d, SSC, temp_water)
data = meteo %>% left_join(kinzhka)
View(data)
data = meteo %>% left_join(kinzhka) %>% zoo::na.approx()
?zoo::na.approx
data_ch = meteo %>% left_join(kinzhka) %>% na.omit()[1,]
data_ch = meteo %>% left_join(kinzhka) %>% na.omit()
View(data_ch)
data[1, ] = data_ch[1, ]
data_ch = meteo %>% left_join(kinzhka) %>% na.omit()
data = meteo %>% left_join(kinzhka)
data[1, ] = data_ch[1, ]
data[nrow(data), ] = data_ch[nrow(data_ch), ]
data = data %>% zoo::na.approx()
data_ch = meteo %>% left_join(kinzhka) %>% na.omit()
data = meteo %>% left_join(kinzhka)
data[1, ] = data_ch[1, ]
data[nrow(data), ] = data_ch[nrow(data_ch), ]
View(data)
data$SSC = zoo::na.approx(data$SSC)
data_ch = meteo %>% left_join(kinzhka) %>% na.omit()
data = meteo %>% left_join(kinzhka)
data[1, ] = data_ch[1, ]
data[nrow(data), ] = data_ch[nrow(data_ch), ]
data = data %>% mutate(SSC = zoo::na.approx(SSC), water_temp = zoo::na.approx(water_temp))
data_ch = meteo %>% left_join(kinzhka) %>% na.omit()
data = meteo %>% left_join(kinzhka)
data[1, ] = data_ch[1, ]
data[nrow(data), ] = data_ch[nrow(data_ch), ]
View(data)
data_ch = meteo %>% left_join(kinzhka) %>% na.omit()
data = meteo %>% left_join(kinzhka)
data[1, ] = data_ch[1, ]
data[nrow(data), ] = data_ch[nrow(data_ch), ]
data = data %>% mutate(SSC = zoo::na.approx(SSC), water_temp = zoo::na.approx(temp_water))
View(data)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  dmy_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 & month(d) == 8)
# hour(meteo[1, 1])
# hour(meteo[96, 1])
#meteo = subset(meteo, is.null(hour(d)) == T)
kinzhka = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 2) %>% mutate(d = ymd_hms(paste0(ymd(`Дата`), ' ', paste(hour(ymd_hms(`Время`)),minute(ymd_hms(`Время`)),second(ymd_hms(`Время`)), sep=":")))) %>% select(d, SSC, temp_water)
data_ch = meteo %>% left_join(kinzhka) %>% na.omit()
data = meteo %>% left_join(kinzhka)
data[1, ] = data_ch[1, ]
data[nrow(data), ] = data_ch[nrow(data_ch), ]
data = data %>% mutate(SSC = zoo::na.approx(SSC), water_temp = zoo::na.approx(temp_water))
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  dmy_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 & month(d) == 8)
# hour(meteo[1, 1])
# hour(meteo[96, 1])
#meteo = subset(meteo, is.null(hour(d)) == T)
kinzhka = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 2) %>% mutate(d = ymd_hms(paste0(ymd(`Дата`), ' ', paste(hour(ymd_hms(`Время`)),minute(ymd_hms(`Время`)),second(ymd_hms(`Время`)), sep=":")))) %>% select(d, SSC, temp_water)
data_ch = meteo %>% left_join(kinzhka) %>% na.omit()
data = meteo %>% left_join(kinzhka)
data[1, ] = data_ch[1, ]
data[nrow(data), ] = data_ch[nrow(data_ch), ]
data = data %>% mutate(SSC = zoo::na.approx(SSC), temp_water = zoo::na.approx(temp_water))
View(data)
discharge = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 5)
View(discharge)
discharge = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 6)
View(discharge)
View(discharge)
View(discharge)
View(data)
View(discharge)
discharge = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 6) %>% mutate(d =  dmy_hm(paste0(Date, ' ', Time))) %>% select(d,Q) %>% subset(year(d) == 2023 & month(d) == 8)
View(data)
View(discharge)
View(discharge)
discharge = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 6) %>% mutate(d = ymd_hms(`Дата`)) %>% select(d,Q) %>% subset(year(d) == 2023 & month(d) == 8)
View(discharge)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  dmy_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 & month(d) == 8)
# hour(meteo[1, 1])
# hour(meteo[96, 1])
#meteo = subset(meteo, is.null(hour(d)) == T)
kinzhka = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 2) %>% mutate(d = ymd_hms(paste0(ymd(`Дата`), ' ', paste(hour(ymd_hms(`Время`)),minute(ymd_hms(`Время`)),second(ymd_hms(`Время`)), sep=":")))) %>% select(d, SSC, temp_water)
discharge = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 6) %>% mutate(d = ymd_hms(`Дата`)) %>% select(d,Q) %>% subset(year(d) == 2023 & month(d) == 8)
data_ch = meteo %>% left_join(kinzhka) %>% na.omit()
data = meteo %>% left_join(kinzhka)
data[1, ] = data_ch[1, ]
data[nrow(data), ] = data_ch[nrow(data_ch), ]
data = data %>% mutate(SSC = zoo::na.approx(SSC), temp_water = zoo::na.approx(temp_water)) %>% left_join(discharge)
View(data)
View(data)
View(data)
data_agg = data %>% group_by(ymd_h(d)) %>% summarise_all(mean)
View(data_agg)
data_agg = data %>% group_by(h = ymd_h(d)) %>% summarise_all(mean)
data_agg = data %>% mutate(h = ymd_h(d)) %>% group_by(h) %>% summarise_all(mean)
View(data)
data_agg = data %>% mutate(date1 = date(d))
View(data_agg)
data_agg = data %>% mutate(date1 = date(d), h = hour(d)) %>% group_by(date1, h) %>% summarise_all(mean)
View(data_agg)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  dmy_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 & month(d) == 8)
# hour(meteo[1, 1])
# hour(meteo[96, 1])
#meteo = subset(meteo, is.null(hour(d)) == T)
kinzhka = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 2) %>% mutate(d = ymd_hms(paste0(ymd(`Дата`), ' ', paste(hour(ymd_hms(`Время`)),minute(ymd_hms(`Время`)),second(ymd_hms(`Время`)), sep=":")))) %>% select(d, SSC, temp_water)
discharge = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 6) %>% mutate(d = ymd_hms(`Дата`)) %>% select(d,Q) %>% subset(year(d) == 2023 & month(d) == 8)
data_ch = meteo %>% left_join(kinzhka) %>% na.omit()
data = meteo %>% left_join(kinzhka)
data[1, ] = data_ch[1, ]
data[nrow(data), ] = data_ch[nrow(data_ch), ]
data = data  %>% left_join(discharge) %>%  mutate(SSC = zoo::na.approx(SSC), temp_water = zoo::na.approx(temp_water), Q = zoo::na.approx(Q))
data_agg = data %>% mutate(date1 = date(d), h = hour(d)) %>% group_by(date1, h) %>% summarise_all(mean)
View(data_agg)
rm(data_ch)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  dmy_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 & month(d) == 8)
# hour(meteo[1, 1])
# hour(meteo[96, 1])
#meteo = subset(meteo, is.null(hour(d)) == T)
kinzhka = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 2) %>% mutate(d = ymd_hms(paste0(ymd(`Дата`), ' ', paste(hour(ymd_hms(`Время`)),minute(ymd_hms(`Время`)),second(ymd_hms(`Время`)), sep=":")))) %>% select(d, SSC, temp_water)
discharge = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 6) %>% mutate(d = ymd_hms(`Дата`)) %>% select(d,Q) %>% subset(year(d) == 2023 & month(d) == 8)
data_ch = meteo %>% left_join(kinzhka) %>% na.omit()
data = meteo %>% left_join(kinzhka)
data[1, ] = data_ch[1, ]
data[nrow(data), ] = data_ch[nrow(data_ch), ]
data = data  %>% left_join(discharge) %>%  mutate(SSC = zoo::na.approx(SSC), temp_water = zoo::na.approx(temp_water), Q = zoo::na.approx(Q))
data_agg = data %>% mutate(date1 = date(d), h = hour(d)) %>% group_by(date1, h) %>% summarise_all(mean)
rm(c(data_ch, meteo, kinzhka, discharge))
rm(data_ch, meteo, kinzhka, discharge)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  dmy_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 & month(d) == 8)
# hour(meteo[1, 1])
# hour(meteo[96, 1])
#meteo = subset(meteo, is.null(hour(d)) == T)
kinzhka = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 2) %>% mutate(d = ymd_hms(paste0(ymd(`Дата`), ' ', paste(hour(ymd_hms(`Время`)),minute(ymd_hms(`Время`)),second(ymd_hms(`Время`)), sep=":")))) %>% select(d, SSC, temp_water)
discharge = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 6) %>% mutate(d = ymd_hms(`Дата`)) %>% select(d,Q) %>% subset(year(d) == 2023 & month(d) == 8)
data_ch = meteo %>% left_join(kinzhka) %>% na.omit()
data = meteo %>% left_join(kinzhka)
data[1, ] = data_ch[1, ]
data[nrow(data), ] = data_ch[nrow(data_ch), ]
data = data  %>% left_join(discharge) %>%  mutate(SSC = zoo::na.approx(SSC), temp_water = zoo::na.approx(temp_water), Q = zoo::na.approx(Q))
data_agg1 = data %>% mutate(date1 = date(d), h = hour(d)) %>% group_by(date1, h) %>% summarise_all(sum) %>% select(d, rain)
data_agg1 = data %>% mutate(date1 = date(d), h = hour(d)) %>% group_by(date1, h) %>% summarise_all(sum)
View(data_agg)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  dmy_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 & month(d) == 8)
# hour(meteo[1, 1])
# hour(meteo[96, 1])
#meteo = subset(meteo, is.null(hour(d)) == T)
kinzhka = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 2) %>% mutate(d = ymd_hms(paste0(ymd(`Дата`), ' ', paste(hour(ymd_hms(`Время`)),minute(ymd_hms(`Время`)),second(ymd_hms(`Время`)), sep=":")))) %>% select(d, SSC, temp_water)
discharge = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 6) %>% mutate(d = ymd_hms(`Дата`)) %>% select(d,Q) %>% subset(year(d) == 2023 & month(d) == 8)
data_ch = meteo %>% left_join(kinzhka) %>% na.omit()
data = meteo %>% left_join(kinzhka)
data[1, ] = data_ch[1, ]
data[nrow(data), ] = data_ch[nrow(data_ch), ]
data = data  %>% left_join(discharge) %>%  mutate(SSC = zoo::na.approx(SSC), temp_water = zoo::na.approx(temp_water), Q = zoo::na.approx(Q))
data_agg1 = data %>% mutate(date1 = date(d), h = hour(d)) %>% group_by(date1, h) %>% select(-d) %>% summarise_all(sum) %>% select(date1, h, rain)
data_agg = data %>% mutate(date1 = date(d), h = hour(d)) %>% group_by(date1, h) %>% summarise_all(mean) %>% left_join(data_agg1) %>%
mutate(d = ymd_h(paste0(date1, ' ',h)))
rm(data_ch, meteo, kinzhka, discharge, data_agg1)
View(data_agg)
data_agg = data %>% mutate(date1 = date(d), h = hour(d)) %>% group_by(date1, h) %>% summarise_all(mean) %>% left_join(data_agg1) %>% select(-rain, d) %>%
mutate(d = ymd_h(paste0(date1, ' ',h)))
data_agg1 = data %>% mutate(date1 = date(d), h = hour(d)) %>% group_by(date1, h) %>% select(-d) %>% summarise_all(sum) %>% select(date1, h, rain)
data_agg = data %>% mutate(date1 = date(d), h = hour(d)) %>% group_by(date1, h) %>% summarise_all(mean) %>% left_join(data_agg1) %>% select(-rain, d) %>%
mutate(d = ymd_h(paste0(date1, ' ',h)))
View(data_agg)
data_agg = data %>% mutate(date1 = date(d), h = hour(d)) %>% group_by(date1, h) %>% summarise_all(mean) %>% select(-rain, d) %>% left_join(data_agg1) %>%
mutate(d = ymd_h(paste0(date1, ' ',h)))
View(data_agg)
data_agg = data %>% mutate(date1 = date(d), h = hour(d)) %>% group_by(date1, h) %>% summarise_all(mean) %>% select(-rain, d) %>% left_join(data_agg1) %>%
mutate(d = ymd_h(paste0(date1, ' ',h))) %>% select(-date1, h)
View(data_agg)
rm(data_ch, meteo, kinzhka, discharge, data_agg1)
View(data_agg)
data_agg1 = data %>% mutate(date1 = date(d), h = hour(d)) %>% group_by(date1, h) %>% select(-d) %>% summarise_all(sum) %>% select(date1, h, rain)
data_agg = data %>% mutate(date1 = date(d), h = hour(d)) %>% group_by(date1, h) %>% summarise_all(mean) %>% select(-rain, d) %>% left_join(data_agg1) %>%
mutate(d = ymd_h(paste0(date1, ' ',h))) %>% select(-date1, -h)
rm(data_ch, meteo, kinzhka, discharge, data_agg1)
View(data_agg)
data_agg1 = data %>% mutate(date1 = date(d), h = hour(d)) %>% group_by(date1, h) %>% select(-d) %>% summarise_all(sum) %>% select(date1, h, rain)
data_agg = data %>% mutate(date1 = date(d), h = hour(d)) %>% group_by(date1, h) %>% summarise_all(mean) %>% select(-rain, d) %>% left_join(data_agg1) %>% mutate(d = ymd_h(paste0(date1, ' ',h))) %>% select(-date1, -h)
View(data_agg)
data_agg = data %>% mutate(date1 = date(d), h = hour(d)) %>% group_by(date1, h) %>% summarise_all(mean) %>% select(-rain, d) %>% left_join(data_agg1) %>% mutate(d = ymd_h(paste0(date1, ' ',h))) %>% ungroup() %>% select(-date1, -h)
View(data_agg)
View(data_agg)
View(data_agg1)
View(data_agg)
plot(data_agg)
writexl::write_xlsx(data_agg, 'C:/Users/пользователь/Desktop/Новая папка/data_agg.xlsx')
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  dmy_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 & month(d) == 8)
# hour(meteo[1, 1])
# hour(meteo[96, 1])
#meteo = subset(meteo, is.null(hour(d)) == T)
kinzhka = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 2) %>% mutate(d = ymd_hms(paste0(ymd(`Дата`), ' ', paste(hour(ymd_hms(`Время`)),minute(ymd_hms(`Время`)),second(ymd_hms(`Время`)), sep=":")))) %>% select(d, SSC, temp_water)
discharge = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 6) %>% mutate(d = ymd_hms(`Дата`)) %>% select(d,Q) %>% subset(year(d) == 2023 & month(d) == 8)
data_ch = meteo %>% left_join(kinzhka) %>% na.omit()
data = meteo %>% left_join(kinzhka)
data[1, ] = data_ch[1, ]
data[nrow(data), ] = data_ch[nrow(data_ch), ]
discharge = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 6) %>% mutate(d = ymd_hms(`Дата`)) %>% select(d,Q) %>% subset(year(d) == 2023 & month(d) == 8)
discharge = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 6) %>% mutate(d = ymd_hms(`Дата`))
View(discharge)
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  dmy_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 & month(d) == 8)
# hour(meteo[1, 1])
# hour(meteo[96, 1])
#meteo = subset(meteo, is.null(hour(d)) == T)
kinzhka = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 2) %>% mutate(d = ymd_hms(paste0(ymd(`Дата`), ' ', paste(hour(ymd_hms(`Время`)),minute(ymd_hms(`Время`)),second(ymd_hms(`Время`)), sep=":")))) %>% select(d, SSC, temp_water)
discharge = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 6) %>% mutate(d = ymd_hms(`Дата`), level = `H_privod скользящее среднее`) %>% select(d,Q, level) %>% subset(year(d) == 2023 & month(d) == 8)
data_ch = meteo %>% left_join(kinzhka) %>% na.omit()
data = meteo %>% left_join(kinzhka)
data[1, ] = data_ch[1, ]
data[nrow(data), ] = data_ch[nrow(data_ch), ]
data = data  %>% left_join(discharge) %>%  mutate(SSC = zoo::na.approx(SSC), temp_water = zoo::na.approx(temp_water), Q = zoo::na.approx(Q))
data_agg1 = data %>% mutate(date1 = date(d), h = hour(d)) %>% group_by(date1, h) %>% select(-d) %>% summarise_all(sum) %>% select(date1, h, rain)
data_agg = data %>% mutate(date1 = date(d), h = hour(d)) %>% group_by(date1, h) %>% summarise_all(mean) %>% select(-rain, d) %>% left_join(data_agg1) %>% mutate(d = ymd_h(paste0(date1, ' ',h))) %>% ungroup() %>% select(-date1, -h)
rm(data_ch, meteo, kinzhka, discharge, data_agg1)
View(data_agg)
data = data  %>% left_join(discharge) %>%  mutate(SSC = zoo::na.approx(SSC), temp_water = zoo::na.approx(temp_water), Q = zoo::na.approx(Q), level = zoo::na.approx(level))
meteo = read.csv('Jankuat_meteo_08_2023.txt', header = T, sep = '', skip = 1) %>% mutate(d =  dmy_hm(paste0(Date, ' ', Time)),
temp = Out,
rain = Rain) %>% select(d, temp, rain) %>% subset(year(d) == 2023 & month(d) == 8)
# hour(meteo[1, 1])
# hour(meteo[96, 1])
#meteo = subset(meteo, is.null(hour(d)) == T)
kinzhka = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 2) %>% mutate(d = ymd_hms(paste0(ymd(`Дата`), ' ', paste(hour(ymd_hms(`Время`)),minute(ymd_hms(`Время`)),second(ymd_hms(`Время`)), sep=":")))) %>% select(d, SSC, temp_water)
discharge = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 6) %>% mutate(d = ymd_hms(`Дата`), level = `H_privod скользящее среднее`) %>% select(d,Q, level) %>% subset(year(d) == 2023 & month(d) == 8)
data_ch = meteo %>% left_join(kinzhka) %>% na.omit()
data = meteo %>% left_join(kinzhka)
data[1, ] = data_ch[1, ]
data[nrow(data), ] = data_ch[nrow(data_ch), ]
data = data  %>% left_join(discharge) %>%  mutate(SSC = zoo::na.approx(SSC), temp_water = zoo::na.approx(temp_water), Q = zoo::na.approx(Q), level = zoo::na.approx(level))
data_agg1 = data %>% mutate(date1 = date(d), h = hour(d)) %>% group_by(date1, h) %>% select(-d) %>% summarise_all(sum) %>% select(date1, h, rain)
data_agg = data %>% mutate(date1 = date(d), h = hour(d)) %>% group_by(date1, h) %>% summarise_all(mean) %>% select(-rain, d) %>% left_join(data_agg1) %>% mutate(d = ymd_h(paste0(date1, ' ',h))) %>% ungroup() %>% select(-date1, -h) %>% mutate(number = row.names())
data_agg = data %>% mutate(date1 = date(d), h = hour(d)) %>% group_by(date1, h) %>% summarise_all(mean) %>% select(-rain, d) %>% left_join(data_agg1) %>% mutate(d = ymd_h(paste0(date1, ' ',h))) %>% ungroup() %>% select(-date1, -h) %>% mutate(number = row.names(.))
View(data_agg)
rm(data_ch, meteo, kinzhka, discharge, data_agg1)
writexl::write_xlsx(data_agg, 'C:/Users/пользователь/Desktop/Новая папка/data_agg1.xlsx')
mean(data_agg$temp)
mean(data_agg$temp)
max(data_agg$temp)
min(data_agg$temp)
sum(data_agg$rain)
max(data_agg$rain)
View(data_agg)
r = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 4)
corrplot::corrplot(cor(r), method = 'number')
View(r)
corrplot::corrplot(cor(r), method = 'number')
mean(r$`G/(R+G)`)
min(r$`G/(R+G)`)
max(r$`G/(R+G)`)
r = readxl::read_xlsx('C:/Users/пользователь/Desktop/Новая папка/джан 2023/книжка август .xlsx', sheet = 4)
corrplot::corrplot(cor(r), method = 'number')
cor(r$Q_А, r$`R+G`)
summary(cor(r$Q_А, r$`R+G`))
summary(cor.test(r$Q_А, r$`R+G`))
cor.test(r$Q_А, r$`R+G`)
cor.test(r$Q_А, r$`R+G`)
load("D:/work/Отчет по Джанкуату 2023/Влекомые наносы, кавказ гидормет/влекомые наносы Толя/Djan2023/.RData")
